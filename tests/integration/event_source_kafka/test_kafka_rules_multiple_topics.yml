- name: test kafka source plugin with multiple topics exact matching
  hosts: localhost
  sources:
    - ansible.eda.kafka:
        topics:
          - kafka-events-topic1
          - kafka-events-topic2
        host: localhost
        port: 9092
        offset: earliest
        encoding: ascii
  rules:
    - name: match kafka event from multiple topics
      condition: event.body.name == "Multi-topic test"
      action:
        debug:
          msg: "Rule fired successfully for multiple topics"

    - name: stop
      condition: event.body == "stop"
      action:
        shutdown:
