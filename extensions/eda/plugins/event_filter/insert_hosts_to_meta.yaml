DOCUMENTATION:
  author:
    - Doston Toirov (@dtoirov)
  short_description: Extract hosts from the event data and insert them to the meta dict.
  description:
    - An ansible-rulebook event filter that extracts hosts from the event data and
      inserts them to the meta dict. Ansible-rulebook will limit an ansible action
      running on hosts in the meta dict.
  version_added: '2.4.0'
  options:
    host_path:
      description:
        - The json path inside the event data to find hosts.
        - Do nothing if the key is not present or does exist in event.
      type: str
    path_separator:
      description:
        - The separator to interpret host_path.
      type: str
      default: "."
    host_separator:
      description:
        - The separator to interpret host string.
        - host_path can point to a string or a list. If it is a single
          string but contains multiple hosts, use this parameter to
          delimits the hosts. Treat the value as a single host if the
          parameter is not present.
      type: str
    raise_error:
      description:
        - Whether raise PathNotExistError if host_path does not
          exist in the event.
        - It is recommended to turn it on during the rulebook
          development time. You can then turn it off for production.
      type: bool
      default: "false"
    log_error:
      description:
        - Whether log an error message if host_path does not
          exist in the event.
        - You can turn if off if it is expected to have events not
          having the host_path to avoid noises in the log.
      type: bool
      default: "bool"

EXAMPLES:
  filters:
    - ansible.eda.insert_hosts_to_meta:
        host_path: "app.target"
        path_separator: "."
        host_separator: ";"
        raise_error: true
        log_error: true
